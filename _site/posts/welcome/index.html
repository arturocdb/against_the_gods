<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Charlie Do Amaral">
<meta name="dcterms.date" content="2022-08-14">

<title>Contra los dioses - Parte I - Introducción a Against The Gods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/profile.jpg" rel="icon" type="image/jpeg">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Contra los dioses</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Inicio</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../proyectos.html" rel="" target="">
 <span class="menu-text">Proyectos</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Sobre nosotros</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/charlie-arturo-do-amaral-becerra/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.youtube.com/@Estadistiqueando" rel="" target=""><i class="bi bi-youtube" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Parte I - Introducción a Against The Gods</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">contexto</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Charlie Do Amaral </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 14, 2022</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Parte I - Introducción (Extracto del libro de Peter L. Bernstein - Against The Tods). Este libro cuenta la historia de un grupo de pensadores cuyo notable visión reveló cómo poner el futuro al servicio del presente.</p>
<p><img src="book_cover.jpg" class="img-fluid"></p>
<p><strong><em>¿Qué es lo que distingue a los miles de años de historia de lo que consideramos tiempos modernos?</em></strong> la respuesta va mucho más allá del progreso de la ciencia, la tecnología, el capitalismo y la democracia”.</p>
<p>“El pasado distante estuvo plagado de brillantes científicos, matemáticos, inventores, tecnólogos y filósofos políticos. Cientos de años antes del nacimiento de Cristo, se habían cartografiado los cielos, se había construido la gran biblioteca de Alejandría y se había enseñado la geometría de Euclides. La demanda de innovación tecnológica en la guerra era tan insaciable entonces como lo es hoy.</p>
<p>El carbón, el petróleo, el hierro y el cobre han estado al servicio de los seres humanos durante milenios, y los viajes y las comunicaciones marcan los comienzos de la civilización registrada”.</p>
<p>“La idea revolucionaria que define el límite entre la modernidad los tiempos y el pasado es el dominio del riesgo: la noción de que el futuro es más que un capricho de los dioses y que los hombres y las mujeres no son pasivos ante la naturaleza. Hasta que los seres humanos descubrieron un camino para cruzar esa frontera, el futuro era un espejo del pasado o el turbio dominio de los oráculos y adivinos que tenían el monopolio del conocimiento de los eventos anticipados”.</p>
<p>Este libro cuenta la historia de un grupo de pensadores cuyo notable visión reveló cómo poner el futuro al servicio del presente. Por mostrando al mundo cómo entender el riesgo, medirlo y sopesar su consecuencias, convirtieron la asunción de riesgos en uno de los principales catalizadores que impulsan a la sociedad occidental moderna.</p>
<p>Como Prometeo, desafiaron a los dioses y sondearon las tinieblas en busca de la luz que convertía el futuro de enemigo en oportunidad. La transformación de las actitudes hacia la gestión de riesgos desencadenada por sus logros ha canalizado la pasión humana por los juegos y las apuestas hacia el crecimiento económico, la mejora de la calidad de vida y el progreso tecnológico.</p>
<p>Al definir un proceso racional de asunción de riesgos, estos innovadores proporcionaron el ingrediente faltante que ha impulsado a la ciencia y la empresa al mundo de la velocidad, el poder, la comunicación instantánea y las finanzas sofisticadas que marcan nuestra época.</p>
<p>Sus descubrimientos sobre la naturaleza del riesgo y el arte y la ciencia de la elección se encuentran en el centro de nuestra economía de mercado moderna a la que las naciones de todo el mundo se apresuran a unirse. Dados todos sus problemas y trampas, la economía libre, con opciones en su centro, ha brindado a la humanidad un acceso sin precedentes a las cosas buenas de la vida.</p>
<p>La capacidad de definir lo que puede suceder en el futuro y elegir entre alternativas está en el corazón de las sociedades contemporáneas. La gestión de riesgos nos guía en una amplia gama de toma de decisiones, desde la asignación de riqueza hasta la protección de la salud pública, desde la guerra hasta la planificación de una familia, desde el pago de primas de seguro hasta el uso del cinturón de seguridad, desde la siembra de maíz hasta la comercialización de copos de maíz.</p>
<p>En los viejos tiempos, las herramientas de agricultura, manufactura, gestión comercial y comunicación eran simples. Las averías eran frecuentes, pero las reparaciones se podían hacer sin llamar al plomero, al electricista, al informático, o a los contadores y asesores de inversiones. El fracaso en un área rara vez tuvo un impacto directo en otra.</p>
<p>Hoy en día, las herramientas que utilizamos son complejas y las averías pueden ser catastróficas, con consecuencias de largo alcance. Debemos ser constantemente conscientes de la probabilidad de mal funcionamiento y errores.</p>
<p>Sin un dominio de la teoría de la probabilidad y otros instrumentos de gestión de riesgos, los ingenieros nunca podrían haber diseñado los grandes puentes que cruzan nuestros ríos más anchos, las casas todavía se calentarían con chimeneas o estufas de salón, los servicios públicos de energía eléctrica no existirían, la poliomielitis seguiría mutilando niños, ningún avión volaría y los viajes espaciales serían solo un sueño.</p>
<p>Sin seguro en sus múltiples variedades, la muerte del sostén de la familia reduciría a las familias jóvenes a la inanición o la caridad, se negaría la atención médica a más personas y solo los más ricos podrían permitirse el lujo de tener una casa. Si los agricultores no pudieran vender sus cosechas a un precio fijado antes de la cosecha, producirían muchos menos alimentos de los que producen.</p>
<p>Si no tuviéramos mercados de capitales líquidos que permitieran a los ahorradores diversificar sus riesgos, si los inversores estuvieran limitados a poseer una sola acción (como lo estaban en los primeros días del capitalismo), las grandes empresas innovadoras que definen nuestra era, empresas como Microsoft, Merck , DuPont, Alcoa, Boeing y McDonald’s, nunca habrían llegado a existir. La capacidad de gestionar el riesgo y, con ella, el apetito por asumir riesgos y tomar decisiones con visión de futuro, son elementos clave de la energía que impulsa el sistema económico.</p>
<p>La concepción moderna del riesgo tiene sus raíces en el sistema de numeración hindú-árabe que llegó a Occidente hace setecientos u ochocientos años. Pero el estudio serio del riesgo comenzó durante el Renacimiento, cuando la gente se liberó de las limitaciones del pasado y sometió creencias arraigadas a un desafío abierto. Era una época en la que gran parte del mundo estaba por descubrirse y explotarse sus recursos. Fue una época de agitación religiosa, capitalismo naciente y un enfoque vigoroso de la ciencia y el futuro.</p>
<p>En 1654, una época en que el Renacimiento estaba en pleno apogeo, el Chevalier de Mere, un noble francés aficionado tanto al juego como a las matemáticas, desafió al famoso matemático francés Blaise Pascal para resolver un rompecabezas. La pregunta era cómo dividir las apuestas de un juego de azar inacabado entre dos jugadores cuando uno de ellos está por delante. El rompecabezas había confundido a los matemáticos desde que lo planteó el monje Luca Paccioli unos doscientos años antes.</p>
<p>Este fue el hombre que atrajo la atención de los gerentes de negocios de su época sobre la contabilidad de partida doble y enseñó a Leonardo da Vinci las tablas de multiplicar. Pascal pidió ayuda a Pierre de Fermat, un abogado que también era un matemático brillante. El resultado de su colaboración fue dinamita intelectual. Lo que podría parecer una versión del siglo XVII del juego Trivial Pursuit condujo al descubrimiento de la teoría de la probabilidad, el corazón matemático del concepto de riesgo.</p>
<p>Su solución al acertijo de Paccioli significó que, por primera vez, las personas podían tomar decisiones y pronosticar el futuro con la ayuda de números. En los mundos medieval y antiguo, incluso en las sociedades prealfabetizadas y campesinas, las personas lograban tomar decisiones, promover sus intereses y comerciar, pero sin una comprensión real del riesgo o la naturaleza de la toma de decisiones. Hoy, confiamos menos en la superstición y la tradición que la gente en el pasado, no porque seamos más racionales, sino porque nuestra comprensión del riesgo nos permite tomar decisiones de manera racional.</p>
<p>En el momento en que Pascal y Fermat hicieron su avance en el fascinante mundo de la probabilidad, la sociedad estaba experimentando una extraordinaria ola de innovación y exploración.</p>
<p>Para 1654, la redondez de la tierra era un hecho establecido, se habían descubierto vastas tierras nuevas, la pólvora estaba reduciendo a polvo los castillos medievales, la impresión con tipos móviles había dejado de ser una novedad, los artistas eran hábiles en el uso de la perspectiva, la riqueza era vertida en Europa, y la bolsa de valores de Amsterdam florecía.</p>
<p>Algunos años antes, en la década de 1630, la famosa burbuja de los tulipanes holandeses había estallado como resultado de la emisión de opciones cuyas características esenciales eran idénticas a los sofisticados instrumentos financieros que se utilizan en la actualidad.</p>
<p>Estos desarrollos tuvieron profundas consecuencias que pusieron en marcha el misticismo. Para entonces, Martín Lutero había dado su opinión y los halos habían desaparecido de la mayoría de las pinturas de la Santísima Trinidad y los santos. William Harvey había derrocado las enseñanzas médicas de los antiguos con su descubrimiento de la circulación de la sangre, y Rembrandt había pintado “La lección de anatomía”, con su cuerpo humano frío, blanco y desnudo. En tal entorno, alguien pronto habría elaborado la teoría de la probabilidad, incluso si el Chevalier de Mere nunca hubiera confrontado a Pascal con su acertijo.</p>
<p>Con el paso de los años, los matemáticos transformaron la teoría de la probabilidad de un juguete de jugadores a un poderoso instrumento para organizar, interpretar y aplicar información. A medida que se amontonaban ideas ingeniosas, surgieron técnicas cuantitativas de gestión de riesgos que ayudaron a desencadenar el ritmo de los tiempos modernos.</p>
<p>En 1725, los matemáticos competían entre sí para diseñar tablas de esperanza de vida y el gobierno inglés se financiaba a sí mismo mediante la venta de rentas vitalicias. A mediados de siglo, los seguros marítimos se habían convertido en un negocio floreciente y sofisticado en Londres.</p>
<p>En 1703, Gottfried von Leibniz le comentó al científico y matemático suizo Jacob Bernoulli que “[N]ature ha establecido patrones que se originan en el retorno de los eventos, pero solo en su mayor parte”, lo que llevó a Bernoulli a inventar la Ley de los Grandes Números y métodos de muestreo estadístico que impulsan actividades modernas tan variadas como las encuestas de opinión, la cata de vinos, la selección de valores y la prueba de nuevos medicamentos.</p>
<p>La advertencia de Leibniz -“pero sólo en su mayor parte”- fue más profunda de lo que pudo haber imaginado, ya que proporcionó la clave de por qué existe el riesgo en primer lugar: sin esa calificación, todo sería predecible, y en un mundo donde cada evento es idéntico a un evento anterior, nunca ocurriría ningún cambio.</p>
<p>En 1730, Abraham de Moivre sugirió la estructura de la distribución normal, también conocida como curva de campana, y descubrió el concepto de desviación estándar. Juntos, estos dos conceptos conforman lo que popularmente se conoce como la Ley de los Promedios y son ingredientes esenciales de las técnicas modernas para cuantificar el riesgo.</p>
<p>Ocho años más tarde, Daniel Bernoulli, sobrino de Jacob y matemático y científico igualmente distinguido, definió por primera vez el proceso sistemático mediante el cual la mayoría de las personas eligen y toman decisiones.</p>
<p>Aún más importante, propuso la idea de que la satisfacción resultante de cualquier pequeño aumento en la riqueza “será inversamente proporcional a la cantidad de bienes poseídos anteriormente”. Con esa afirmación que suena inocente, Bernoulli explicó por qué el rey Midas era un hombre infeliz, por qué la gente tiende a tener aversión al riesgo y por qué los precios deben caer si se quiere persuadir a los clientes para que compren más. La declaración de Bernoulli se mantuvo como el paradigma dominante del comportamiento racional durante los siguientes 250 años y sentó las bases para los principios modernos de gestión de inversiones.</p>
<p>Casi exactamente cien años después de la colaboración entre Pascal y Fermat, un ministro inglés disidente llamado Thomas Bayes hizo un avance sorprendente en las estadísticas al demostrar cómo tomar decisiones mejor informadas combinando matemáticamente información nueva con información antigua. El teorema de Bayes se enfoca en las ocasiones frecuentes en las que tenemos juicios intuitivos sólidos sobre la probabilidad de algún evento y queremos entender cómo alterar esos juicios a medida que se desarrollan los eventos reales.</p>
<p>Todas las herramientas que utilizamos hoy en día en la gestión de riesgos y en el análisis de decisiones y elecciones, desde la estricta racionalidad de la teoría de juegos hasta los desafíos de la teoría del caos, provienen de los desarrollos que tuvieron lugar entre 1654 y 1760, con solo dos excepciones:</p>
<p>En 1875, Francis Galton, un matemático aficionado que era primo hermano de Charles Darwin, descubrió la regresión a la media, lo que explica por qué el orgullo precede a la caída y por qué las nubes tienden a tener revestimientos plateados. Cada vez que tomamos una decisión basada en la expectativa de que las cosas volverán a la “normalidad”, estamos empleando la noción de regresión a la media.</p>
<p>En 1952, el premio Nobel Harry Markowitz, entonces un joven estudiante de posgrado que estudiaba investigación operativa en la Universidad de Chicago, demostró matemáticamente por qué poner todos los huevos en una sola canasta es una estrategia inaceptablemente arriesgada y por qué la diversificación es lo más cercano que un inversor o gerente de negocios puede jamás ven a un almuerzo gratis. Esa revelación desencadenó el movimiento intelectual que revolucionó Wall Street, las finanzas corporativas y las decisiones comerciales en todo el mundo; sus efectos todavía se sienten hoy.</p>
<p>continuará…</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>